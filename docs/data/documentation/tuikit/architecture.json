{"schemaVersion":{"minor":3,"patch":0,"major":0},"hierarchy":{"paths":[["doc:\/\/com.anthropic.tuikit.documentation\/documentation\/TUIKit"]]},"primaryContentSections":[{"content":[{"text":"Core Design Principles","type":"heading","anchor":"Core-Design-Principles","level":2},{"type":"paragraph","inlineContent":[{"type":"text","text":"TUIKit follows these key principles:"}]},{"type":"orderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"inlineContent":[{"type":"text","text":"Declarative UI"}],"type":"strong"},{"text":": Describe what you want, not how to build it","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"inlineContent":[{"text":"Composability","type":"text"}],"type":"strong"},{"text":": Build complex UIs from simple, reusable components","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Value Semantics"}]},{"type":"text","text":": Views are lightweight value types, not stateful objects"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"inlineContent":[{"text":"Data Flow","type":"text"}],"type":"strong"},{"type":"text","text":": Clear, unidirectional data flow through Environment and State"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"inlineContent":[{"type":"text","text":"Pure Swift"}],"type":"strong"},{"text":": No external dependencies or C bindings","type":"text"}]}]}]},{"text":"The View System","type":"heading","anchor":"The-View-System","level":2},{"text":"View Protocol","type":"heading","anchor":"View-Protocol","level":3},{"type":"paragraph","inlineContent":[{"type":"text","text":"The "},{"code":"View","type":"codeVoice"},{"type":"text","text":" protocol is the foundation of TUIKit:"}]},{"type":"codeListing","syntax":"swift","code":["public protocol View {","    associatedtype Body: View","    @ViewBuilder var body: Body { get }","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Views are "},{"type":"strong","inlineContent":[{"text":"not","type":"text"}]},{"type":"text","text":" UI elements—they’re descriptions of UI that get rendered when needed. This enables:"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Lightweight composition"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Efficient updates"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Declarative syntax"}],"type":"paragraph"}]}]},{"text":"Primitive vs Composite Views","type":"heading","anchor":"Primitive-vs-Composite-Views","level":3},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"text":"Primitive Views","type":"text"}]},{"type":"text","text":" directly render content:"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Conform to "},{"type":"codeVoice","code":"Renderable"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Have "},{"type":"codeVoice","code":"body: Never"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Examples: "},{"type":"codeVoice","code":"Text"},{"type":"text","text":", "},{"type":"codeVoice","code":"Button"},{"type":"text","text":", "},{"type":"codeVoice","code":"Menu"}]}]}]},{"type":"paragraph","inlineContent":[{"inlineContent":[{"text":"Composite Views","type":"text"}],"type":"strong"},{"text":" combine other views:","type":"text"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Define a "},{"type":"codeVoice","code":"body"},{"type":"text","text":" property"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Renderer walks the tree recursively"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Examples: "},{"type":"codeVoice","code":"VStack"},{"type":"text","text":", "},{"type":"codeVoice","code":"HStack"},{"type":"text","text":", "},{"type":"codeVoice","code":"Card"}]}]}]},{"text":"Rendering Pipeline","type":"heading","anchor":"Rendering-Pipeline","level":3},{"type":"orderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"text":"View Tree","type":"text"}]},{"type":"text","text":": User creates view hierarchy"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Traversal"}]},{"text":": Renderer walks tree depth-first","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"text":"Rendering","type":"text"}]},{"type":"text","text":": Primitive views produce "},{"type":"codeVoice","code":"FrameBuffer"},{"type":"text","text":" character data"}]}]},{"content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"Compositing"}],"type":"strong"},{"text":": Overlays blend on top with character-level precision","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Output"}]},{"type":"text","text":": Terminal renders the final buffer"}]}]}]},{"text":"State Management Architecture","type":"heading","anchor":"State-Management-Architecture","level":2},{"text":"Local State (@State)","type":"heading","anchor":"Local-State-State","level":3},{"type":"paragraph","inlineContent":[{"text":"Stored in the view itself:","type":"text"}]},{"type":"codeListing","syntax":"swift","code":["@State var count: Int = 0"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"When "},{"type":"codeVoice","code":"@State"},{"type":"text","text":" changes, the view re-renders automatically."}]},{"text":"Environment (Top-Down)","type":"heading","anchor":"Environment-Top-Down","level":3},{"type":"paragraph","inlineContent":[{"type":"text","text":"Parent views pass data to children:"}]},{"type":"codeListing","syntax":"swift","code":["@Environment(\\.theme) var theme","","\/\/ Theme flows from App → all children"]},{"text":"Preferences (Bottom-Up)","type":"heading","anchor":"Preferences-Bottom-Up","level":3},{"type":"paragraph","inlineContent":[{"text":"Children can propagate values to parents (rarely used in TUIKit).","type":"text"}]},{"text":"Storage (@AppStorage, @SceneStorage)","type":"heading","anchor":"Storage-AppStorage-SceneStorage","level":3},{"type":"paragraph","inlineContent":[{"type":"text","text":"Persistent storage via:"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"@AppStorage"}]},{"type":"text","text":": UserDefaults (macOS) or JSON file (Linux)"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"text":"@SceneStorage","type":"text"}]},{"type":"text","text":": Per-scene state restoration"}]}]}]},{"text":"Data Flow Pattern","type":"heading","anchor":"Data-Flow-Pattern","level":2},{"type":"codeListing","syntax":null,"code":["┌─────────────────────────────────────┐","│           App or Scene              │","│  @AppStorage, @State, Environment   │","└────────┬────────────────────────────┘","         │ passes theme, data","         ▼","┌─────────────────────────────────────┐","│    Composite Views (VStack, etc)    │","│  pass Environment to children       │","└────────┬────────────────────────────┘","         │ may use @State locally","         ▼","┌─────────────────────────────────────┐","│     Primitive Views (Text, Button)  │","│  render to FrameBuffer              │","└─────────────────────────────────────┘"]},{"text":"Theme and Appearance System","type":"heading","anchor":"Theme-and-Appearance-System","level":2},{"text":"Theme Protocol","type":"heading","anchor":"Theme-Protocol","level":3},{"type":"paragraph","inlineContent":[{"type":"text","text":"Defines semantic colors:"}]},{"type":"codeListing","syntax":"swift","code":["public protocol Theme {","    var background: Color { get }","    var accent: Color { get }","    \/\/ ... other colors","}"]},{"text":"Appearance Protocol","type":"heading","anchor":"Appearance-Protocol","level":3},{"type":"paragraph","inlineContent":[{"type":"text","text":"Defines structural styles:"}]},{"type":"codeListing","syntax":"swift","code":["public enum Appearance {","    case line, rounded, doubleLine, heavy, block","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Both are passed through Environment, enabling:"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Global theme switching","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Dynamic appearance changes"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Consistent styling across app","type":"text"}]}]}]},{"text":"Focus Management System","type":"heading","anchor":"Focus-Management-System","level":2},{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"FocusManager"},{"text":" tracks which element has keyboard focus:","type":"text"}]},{"type":"orderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"text":"Focus ID","type":"text"}]},{"text":": Each interactive element has a unique ID","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Navigation"}]},{"type":"text","text":": Tab\/Shift+Tab moves focus"}]}]},{"content":[{"inlineContent":[{"type":"strong","inlineContent":[{"text":"Rendering","type":"text"}]},{"type":"text","text":": Focused element shows visual indicator"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"inlineContent":[{"type":"text","text":"Events"}],"type":"strong"},{"text":": Keyboard events route to focused element","type":"text"}]}]}]},{"type":"codeListing","syntax":"swift","code":["@Environment(\\.focusManager) var focusManager","","\/\/ Navigation automatically updates focusManager","\/\/ onKeyPress receives keyboard events"]},{"text":"Modifier System","type":"heading","anchor":"Modifier-System","level":2},{"type":"paragraph","inlineContent":[{"text":"Modifiers wrap views to add behavior:","type":"text"}]},{"type":"codeListing","syntax":"swift","code":["extension View {","    func padding(_ amount: Int) -> some View {","        ModifiedView(content: self, modifier: PaddingModifier(amount))","    }","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Modifiers compose:"}]},{"type":"codeListing","syntax":"swift","code":["Text(\"Hello\")","    .bold()           \/\/ Text → BoldView","    .padding(1)       \/\/ BoldView → PaddedView","    .border(.rounded) \/\/ PaddedView → BorderedView"]},{"text":"Component Library","type":"heading","anchor":"Component-Library","level":2},{"text":"Container Views","type":"heading","anchor":"Container-Views","level":3},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"codeVoice","code":"VStack"},{"type":"text","text":", "},{"type":"codeVoice","code":"HStack"},{"type":"text","text":", "},{"type":"codeVoice","code":"ZStack"},{"type":"text","text":": Layout primitives"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"Card"},{"text":", ","type":"text"},{"type":"codeVoice","code":"Box"},{"text":", ","type":"text"},{"type":"codeVoice","code":"Panel"},{"text":": Styled containers","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"ContainerView"},{"type":"text","text":": Header\/body\/footer structure"}]}]}]},{"text":"Interactive Views","type":"heading","anchor":"Interactive-Views","level":3},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"Button"},{"type":"text","text":": Clickable button with focus"}]}]},{"content":[{"inlineContent":[{"type":"codeVoice","code":"Menu"},{"text":": Selection menu with keyboard","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"code":"Alert","type":"codeVoice"},{"type":"text","text":", "},{"code":"Dialog","type":"codeVoice"},{"type":"text","text":": Modal overlays"}]}]}]},{"text":"Structural Views","type":"heading","anchor":"Structural-Views","level":3},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"code":"ForEach","type":"codeVoice"},{"text":": Render collections","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"codeVoice","code":"Text"},{"text":": Display text","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"code":"Spacer","type":"codeVoice"},{"text":", ","type":"text"},{"code":"Divider","type":"codeVoice"},{"text":": Layout helpers","type":"text"}],"type":"paragraph"}]}]},{"text":"Status Bar","type":"heading","anchor":"Status-Bar","level":3},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"StatusBar"},{"type":"text","text":": Application status bar"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"code":"StatusBarItem","type":"codeVoice"},{"text":": Individual item","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"Shortcut"},{"type":"text","text":": Keyboard shortcut display"}]}]}]},{"text":"Rendering Engine","type":"heading","anchor":"Rendering-Engine","level":2},{"text":"FrameBuffer","type":"heading","anchor":"FrameBuffer","level":3},{"type":"paragraph","inlineContent":[{"type":"text","text":"Character-level buffer for compositing:"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"2D array of characters and attributes","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Supports color, styling (bold, italic, etc.)"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Compositing for overlays"}],"type":"paragraph"}]}]},{"text":"ANSI Renderer","type":"heading","anchor":"ANSI-Renderer","level":3},{"type":"paragraph","inlineContent":[{"text":"Converts buffer to ANSI escape codes:","type":"text"}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"Color codes (foreground\/background)","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Styling (bold, italic, underline)","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Terminal state management","type":"text"}]}]}]},{"text":"Terminal Abstraction","type":"heading","anchor":"Terminal-Abstraction","level":3},{"type":"paragraph","inlineContent":[{"type":"text","text":"Platform-specific terminal handling:"}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"macOS: termios"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Linux: termios via libc"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Raw mode, alternate screen, signal handling","type":"text"}],"type":"paragraph"}]}]},{"text":"Performance Considerations","type":"heading","anchor":"Performance-Considerations","level":2},{"type":"orderedList","items":[{"content":[{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Lazy Rendering"}]},{"type":"text","text":": Only visible areas render"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"text":"Diff Optimization","type":"text"}]},{"text":": Only changed areas redraw","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"inlineContent":[{"text":"Buffer Reuse","type":"text"}],"type":"strong"},{"text":": FrameBuffer recycled across frames","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"text":"View Value Semantics","type":"text"}]},{"type":"text","text":": Lightweight copying and discarding"}]}]}]},{"text":"Error Handling","type":"heading","anchor":"Error-Handling","level":2},{"type":"paragraph","inlineContent":[{"text":"TUIKit uses Swift’s error handling:","type":"text"}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"Fatal errors for programmer mistakes","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Non-fatal errors for recovery scenarios"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Storage backend errors are silenced (fallback to defaults)","type":"text"}]}]}]},{"text":"Platform Support","type":"heading","anchor":"Platform-Support","level":2},{"text":"macOS","type":"heading","anchor":"macOS","level":3},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Native UserDefaults for @AppStorage"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Full terminal support"}]}]},{"content":[{"inlineContent":[{"text":"Modern Swift runtime","type":"text"}],"type":"paragraph"}]}]},{"text":"Linux","type":"heading","anchor":"Linux","level":3},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"JSON file storage for @AppStorage"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"glibc-based terminal support"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"XDG paths for configuration"}]}]}]},{"text":"Future Extensibility","type":"heading","anchor":"Future-Extensibility","level":2},{"type":"paragraph","inlineContent":[{"text":"The architecture supports:","type":"text"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Custom storage backends","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Custom themes"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Custom appearances","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Custom view components","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Animation system (planned)"}],"type":"paragraph"}]}]},{"text":"Related Topics","type":"heading","anchor":"Related-Topics","level":2},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"View"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"code":"Theme","type":"codeVoice"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"Appearance"}]}]},{"content":[{"inlineContent":[{"code":"FocusManager","type":"codeVoice"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"codeVoice","code":"FrameBuffer"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"doc:Rendering"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"identifier":"doc:\/\/com.anthropic.tuikit.documentation\/documentation\/TUIKit\/StateManagement","isActive":true,"type":"reference"}]}]}]}],"kind":"content"}],"kind":"article","metadata":{"role":"article","roleHeading":"Article","title":"Architecture Overview"},"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/com.anthropic.tuikit.documentation\/documentation\/TUIKit\/Architecture"},"sections":[],"abstract":[{"type":"text","text":"Understand the architecture and design patterns that power TUIKit."}],"references":{"doc://com.anthropic.tuikit.documentation/documentation/TUIKit/StateManagement":{"abstract":[{"text":"Learn how to manage application state and data flow in TUIKit.","type":"text"}],"identifier":"doc:\/\/com.anthropic.tuikit.documentation\/documentation\/TUIKit\/StateManagement","url":"\/documentation\/tuikit\/statemanagement","title":"State Management","kind":"article","type":"topic","role":"article"},"doc://com.anthropic.tuikit.documentation/documentation/TUIKit":{"url":"\/documentation\/tuikit","role":"collection","title":"TUIKit","kind":"article","type":"topic","identifier":"doc:\/\/com.anthropic.tuikit.documentation\/documentation\/TUIKit","abstract":[]}}}